<!-- saved from url=(0014)about:internet -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<title>MultiLayerSearch.mxml</title>
<link rel="stylesheet" type="text/css" href="../SourceStyles.css"/>
</head>

<body><pre><span class="MXMLProcessing_Instruction">&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;</span>
<span class="MXMLComponent_Tag">&lt;mx:Application</span><span class="MXMLDefault_Text"> xmlns:mx=&quot;</span><span class="MXMLString">http://www.adobe.com/2006/mxml</span><span class="MXMLDefault_Text">&quot;
    layout=&quot;</span><span class="MXMLString">absolute</span><span class="MXMLDefault_Text">&quot; xmlns:ns1=&quot;</span><span class="MXMLString">bridge.*</span><span class="MXMLDefault_Text">&quot; 
    applicationComplete=&quot;</span><span class="ActionScriptDefault_Text">initApp</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; xmlns:comp = </span>&quot;<span class="MXMLString">*</span><span class="MXMLDefault_Text">&quot; viewSourceURL=&quot;</span><span class="MXMLString">srcview/index.html</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
    
    <span class="MXMLSpecial_Tag">&lt;mx:Script&gt;</span>
        <span class="ActionScriptOperator">&lt;!</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">CDATA</span><span class="ActionScriptBracket/Brace">[</span>
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">CloseEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">messaging</span>.<span class="ActionScriptDefault_Text">SubscriptionInfo</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">controls</span>.<span class="ActionScriptDefault_Text">CheckBox</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">messaging</span>.<span class="ActionScriptDefault_Text">channels</span>.<span class="ActionScriptDefault_Text">StreamingAMFChannel</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">messaging</span>.<span class="ActionScriptDefault_Text">management</span>.<span class="ActionScriptDefault_Text">Attribute</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">managers</span>.<span class="ActionScriptDefault_Text">PopUpManager</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">collections</span>.<span class="ActionScriptDefault_Text">ArrayCollection</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">rpc</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">FaultEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">rpc</span>.<span class="ActionScriptDefault_Text">events</span>.<span class="ActionScriptDefault_Text">ResultEvent</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">rpc</span>.<span class="ActionScriptDefault_Text">http</span>.<span class="ActionScriptDefault_Text">HTTPService</span>;
            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">mx</span>.<span class="ActionScriptDefault_Text">controls</span>.<span class="ActionScriptDefault_Text">Alert</span>;
            <span class="ActionScriptComment">// for parsing json strings, add as3corelib.swc file to the project from: libs/as3corelib-.92.1/lib dir
</span>            <span class="ActionScriptReserved">import</span> <span class="ActionScriptDefault_Text">com</span>.<span class="ActionScriptDefault_Text">adobe</span>.<span class="ActionScriptDefault_Text">serialization</span>.<span class="ActionScriptDefault_Text">json</span>.<span class="ActionScriptOperator">*</span>;   
                        
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptComment">// to store the list of feature clicked by user
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">featureids_arr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
                
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptComment">//to store list of layers show to user on UI for feature based search tab
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fb_layers_arr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptComment">//to store list of layers show to user on UI for attribute based search tab
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">ab_layers_arr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptMetadata">Bindable</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptComment">// to store the layername and corresponding attributes list
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layer_attr_arr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>; <span class="ActionScriptComment">// flash variable from javascript - /IBP/
</span>            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dataFile</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>; <span class="ActionScriptComment">// flash variable from javascript - MultiLayerSearch.php 
</span>            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">bbox</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>; <span class="ActionScriptComment">// flash variable from javascript - the current bounding box value
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layersChecked</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>; <span class="ActionScriptComment">// flash variable from javascript - list of layers checked seperated by comma
</span>            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">layersChecked_arr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>; <span class="ActionScriptComment">// to store checked layers in an array index
</span>            
            <span class="ActionScriptComment">// stores as obj with layertablename, list of fids and checked values - as a result of simple search                         
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">curr_search_type</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>;
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">initApp</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                                
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">loadParams</span><span class="ActionScriptBracket/Brace">())</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptComment">// ajax call to get list of all layers for attribute based search box
</span>                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">action</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;getAllLayers&quot;</span>;
                    <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">dataFile</span>, <span class="ActionScriptString">&quot;GET&quot;</span>, <span class="ActionScriptDefault_Text">obj</span>, <span class="ActionScriptDefault_Text">addLayersToArr_ab</span>,<span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptComment">// ajax call to get list of all the layers within the current bounding box for feature based search box
</span>                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">action</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;getBoxLayers&quot;</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">bbox</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">bbox</span>;
                    <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">dataFile</span>, <span class="ActionScriptString">&quot;GET&quot;</span>, <span class="ActionScriptDefault_Text">obj</span>, <span class="ActionScriptDefault_Text">addLayersToArr_fb</span>,<span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">container</span>.<span class="ActionScriptDefault_Text">visible</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptBracket/Brace">}</span>                                
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">loadParams</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptBracket/Brace">{</span>
                
                <span class="ActionScriptComment">// Remove this while export build ... for testing
</span>                <span class="ActionScriptComment">/*basePath = &apos;/uap/&apos;;
                dataFile =&apos;MultiLayerSearch.php&apos;;
                bbox = &apos;-70.93164062101 -19.558208352536,128.93164062101 62.472499550238&apos;;
                layersChecked = &apos;&apos;;
                layersChecked_arr = layersChecked.split(&quot;,&quot;);                
                return true;*/</span>
                <span class="ActionScriptComment">// check all the flash varaibles paased bvy javascript and store them in local variables.            
</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">basePath</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">dataFile</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">layersChecked</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span> <span class="ActionScriptOperator">||</span> <span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">bbox</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;Required configuration parameters are not set.&quot;</span>, <span class="ActionScriptString">&quot;Error&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">basePath</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">basePath</span>;
                <span class="ActionScriptDefault_Text">dataFile</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">dataFile</span>;
                <span class="ActionScriptDefault_Text">bbox</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">bbox</span>;
                <span class="ActionScriptDefault_Text">layersChecked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">application</span>.<span class="ActionScriptDefault_Text">parameters</span>.<span class="ActionScriptDefault_Text">layersChecked</span>;
                <span class="ActionScriptDefault_Text">layersChecked_arr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layersChecked</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptBracket/Brace">)</span>;                
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            
            <span class="ActionScriptComment">// function to use ajax service from flash
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">url</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>, <span class="ActionScriptDefault_Text">method</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>, <span class="ActionScriptDefault_Text">parameters</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span>, <span class="ActionScriptDefault_Text">resultHandler</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span>, <span class="ActionScriptDefault_Text">faultHandler</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Function</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">service</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">HTTPService</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">HTTPService</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">useProxy</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">url</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">url</span>;
                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">method</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">method</span>;
                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">resultFormat</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;text&quot;</span>; <span class="ActionScriptComment">//returns the response as json - so text
</span>                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">requestTimeout</span> <span class="ActionScriptOperator">=</span> 30;
                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ResultEvent</span>.<span class="ActionScriptDefault_Text">RESULT</span>, <span class="ActionScriptDefault_Text">resultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">FaultEvent</span>.<span class="ActionScriptDefault_Text">FAULT</span>, <span class="ActionScriptDefault_Text">faultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">service</span>.<span class="ActionScriptDefault_Text">send</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">parameters</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// adds the layer_name, layertable name and checked value to the array
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addLayersToArr_ab</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">JSON</span>.<span class="ActionScriptDefault_Text">decode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">())</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">key</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                      <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
                      <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">key</span><span class="ActionScriptBracket/Brace">]</span>;
                      <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">key</span>;
                      <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;                                                
                      <span class="ActionScriptDefault_Text">ab_layers_arr</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;                 
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">setDataProviders</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span>;                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// adds the layer_name, layertable name and checked value to the array
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addLayersToArr_fb</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>                
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">JSON</span>.<span class="ActionScriptDefault_Text">decode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">())</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">key</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                      <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
                      <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">key</span><span class="ActionScriptBracket/Brace">]</span>;
                      <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">key</span>;
                      <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;                                                
                      <span class="ActionScriptDefault_Text">fb_layers_arr</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;                 
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">setDataProviders</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                    <span class="ActionScriptDefault_Text">featureSearch</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// function to handle fault in an ajax call 
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">FaultEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">fault</span>.<span class="ActionScriptDefault_Text">faultString</span>, <span class="ActionScriptString">&quot;Error&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span> 
            <span class="ActionScriptComment">// sets the data provider for the list box in feature based and attribute based UI 
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setDataProviders</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 0 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fb_layers_lst</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>                        
                        <span class="ActionScriptDefault_Text">fb_layers_arr</span>.<span class="ActionScriptDefault_Text">sortOn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;label&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">fb_layers_lst</span>.<span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">fb_layers_arr</span>;                
                        <span class="ActionScriptDefault_Text">fb_layers_lst</span>.<span class="ActionScriptDefault_Text">invalidateList</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptComment">//ExternalInterface.call(&quot;setFeatureClick&quot;, 1,1);
</span>                    <span class="ActionScriptComment">//Alert.show(&apos;here&apos;);
</span>                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 2 <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bb_layers_lst</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>                        
                        <span class="ActionScriptDefault_Text">fb_layers_arr</span>.<span class="ActionScriptDefault_Text">sortOn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;label&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">bb_layers_lst</span>.<span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">fb_layers_arr</span>;                
                        <span class="ActionScriptDefault_Text">bb_layers_lst</span>.<span class="ActionScriptDefault_Text">invalidateList</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ab_layers_lst</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>                        
                        <span class="ActionScriptDefault_Text">ab_layers_arr</span>.<span class="ActionScriptDefault_Text">sortOn</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;label&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">ab_layers_lst</span>.<span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ab_layers_arr</span>;
                        <span class="ActionScriptDefault_Text">ab_layers_lst</span>.<span class="ActionScriptDefault_Text">invalidateList</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>                    
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// to handle click event of remove/removeall button for removing selected feature
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">removeFeature</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptComment">//remove single feature
</span>                    <span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">splice</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureids_lst</span>.<span class="ActionScriptDefault_Text">selectedIndex</span>,1<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">else</span><span class="ActionScriptComment">//remove all the features
</span>                    <span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">splice</span><span class="ActionScriptBracket/Brace">(</span>0, <span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">featureids_lst</span>.<span class="ActionScriptDefault_Text">invalidateList</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&lt;</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">rmAllBut</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">rmBut</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">featureSearch</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptComment">//fb_hbx2.enabled = false;
</span>                    <span class="ActionScriptComment">//fb_hbx3.enabled = false;
</span>                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// called from javascript to add a feature clicked by user to the list box 
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addFeatureid</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span>, <span class="ActionScriptDefault_Text">ltname</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">flag</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span> <span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">featureids_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ltname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;:&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">val</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()))</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">flag</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ltname</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;:&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">val</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">())</span>;                    
                    <span class="ActionScriptDefault_Text">featureids_lst</span>.<span class="ActionScriptDefault_Text">invalidateList</span><span class="ActionScriptBracket/Brace">()</span>;
                    
                    <span class="ActionScriptDefault_Text">rmBut</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">rmAllBut</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fb_layers_arr</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">featureSearch</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptComment">//fb_hbx2.enabled = true;
</span>                    <span class="ActionScriptComment">//fb_hbx3.enabled = true;
</span>                <span class="ActionScriptBracket/Brace">}</span>            
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">addBBOX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">bbox</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">txtBBOX</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">bbox</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">Clear</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">txtBBOX</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&apos;&apos;</span>;
                <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;clearBBOX&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">ActivateBBOX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">value</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Boolean</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;ActivateBBOX&quot;</span>,<span class="ActionScriptDefault_Text">value</span><span class="ActionScriptBracket/Brace">)</span>;
                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// returns a comma seperated string of feature ids from the list box for feature based search
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getFeatureids</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp1</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp2</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp3</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">featureids_arr</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">temp1</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">featureids_arr</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">temp3</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp1</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;:&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">temp2</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp2</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;,&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">temp3</span><span class="ActionScriptBracket/Brace">[</span>1<span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">temp2</span>.<span class="ActionScriptDefault_Text">slice</span><span class="ActionScriptBracket/Brace">(</span>1, <span class="ActionScriptDefault_Text">temp2</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>            
            <span class="ActionScriptComment">// to handle click event of search button for a all the 3 modes
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">container</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptDefault_Text">curr_search_type</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">val</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptComment">// simple search
</span>                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">action</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;searchByStr&quot;</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">srchStr</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">search_inp</span>.<span class="ActionScriptDefault_Text">text</span>;                    
                    <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">dataFile</span>, <span class="ActionScriptString">&quot;GET&quot;</span>, <span class="ActionScriptDefault_Text">obj</span>, <span class="ActionScriptDefault_Text">showStrSearchRes</span>, <span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptComment">// feature based search                
</span>                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">action</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;searchByFeature&quot;</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">featureids</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">getFeatureids</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">searchDist</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">delta_inp</span>.<span class="ActionScriptDefault_Text">text</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">getSelLayerList</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;&quot;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>                        
                        <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;You must select atleast one layer&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">container</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                    
                        <span class="ActionScriptReserved">return</span>;
                    <span class="ActionScriptBracket/Brace">}</span>             
                    <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">dataFile</span>, <span class="ActionScriptString">&quot;GET&quot;</span>, <span class="ActionScriptDefault_Text">obj</span>, <span class="ActionScriptDefault_Text">showSearchRes</span>, <span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;changeDivWidth&quot;</span>, 1<span class="ActionScriptBracket/Brace">)</span>;                    
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptComment">// attribute based search                                       
</span>                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">action</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;searchByAttr&quot;</span>;                                                            
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">whrClause</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">getSelLayerList</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;&quot;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>                        
                        <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;You must select atleast one layer&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">container</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                    
                        <span class="ActionScriptReserved">return</span>;
                    <span class="ActionScriptBracket/Brace">}</span>             
                    <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">dataFile</span>, <span class="ActionScriptString">&quot;GET&quot;</span>, <span class="ActionScriptDefault_Text">obj</span>, <span class="ActionScriptDefault_Text">showSearchRes</span>, <span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;changeDivWidth&quot;</span>, 1<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 4<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptComment">// Bounding Box search                
</span>                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">action</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;searchByBBOX&quot;</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">bbox</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">txtBBOX</span>.<span class="ActionScriptDefault_Text">text</span>;
                    
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">getSelLayerList</span><span class="ActionScriptBracket/Brace">(</span>2<span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;&quot;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>                        
                        <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;You must select atleast one layer&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">container</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                    
                        <span class="ActionScriptReserved">return</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">txtBBOX</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&apos;&apos;</span><span class="ActionScriptBracket/Brace">){</span>
                        <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;You must draw a rectangle to search into.&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                        <span class="ActionScriptDefault_Text">container</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                    
                        <span class="ActionScriptReserved">return</span>;
                    <span class="ActionScriptBracket/Brace">}</span>             
                    <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">dataFile</span>, <span class="ActionScriptString">&quot;GET&quot;</span>, <span class="ActionScriptDefault_Text">obj</span>, <span class="ActionScriptDefault_Text">showSearchRes</span>, <span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;changeDivWidth&quot;</span>, 1<span class="ActionScriptBracket/Brace">)</span>;                    
                <span class="ActionScriptBracket/Brace">}</span>
                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// returns the list of layer_tablename (seperated by comma) checked by user in the list box 
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getSelLayerList</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;&quot;</span>;
                <span class="ActionScriptDefault_Text">layersChecked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;getLayersChecked&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layersChecked_arr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layersChecked</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptComment">// for feature based search 
</span>                    <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layersChecked_arr</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;                    
                    <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">fb_layers_arr</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fb_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fb_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">layersChecked_arr</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">])</span>
                                <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">fb_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">data</span>;
                        <span class="ActionScriptBracket/Brace">}</span>                        
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span> <span class="ActionScriptOperator">==</span> 2<span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptComment">// for Bounding Box search 
</span>                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layersChecked_arr</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">&gt;</span> 0<span class="ActionScriptBracket/Brace">){</span>
                        <span class="ActionScriptComment">//Alert.show(String(layersChecked_arr.length ));
</span>                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">layersChecked_arr</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptString">&apos;Polygon Layer&apos;</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layersChecked_arr</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span><span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;,&quot;</span>;    
                    <span class="ActionScriptBracket/Brace">}</span>
                    
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">len</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">fb_layers_arr</span>.<span class="ActionScriptDefault_Text">length</span>;                    
                    <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">k</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">len</span> ; <span class="ActionScriptDefault_Text">k</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fb_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                            <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">fb_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptDefault_Text">layersChecked_arr</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]){</span>
                                <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">+=</span> <span class="ActionScriptDefault_Text">fb_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">k</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;,&quot;</span>;
                                
                            <span class="ActionScriptBracket/Brace">}</span>
                                
                        <span class="ActionScriptBracket/Brace">}</span>
                                               
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptComment">//Alert.show(temp); 
</span>                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">indexOf</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;,&apos;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>1,<span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>;
                        
                    <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0,<span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span> <span class="ActionScriptOperator">-</span> 1 <span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptComment">//Alert.show(temp); 
</span>                    
                    
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>   <span class="ActionScriptComment">// for attribute based search    
</span>                    <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">ab_layers_arr</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ab_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                                <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">ab_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">data</span>;
                        <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">substring</span><span class="ActionScriptBracket/Brace">(</span>1,<span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">temp</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// to get the fids of corresponding layer_tablname for simple search
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getSearchIds</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tablename</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">srch_table_ids</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">tablename</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptReserved">break</span>;                        
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">fids</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">//called from javasscript code on the close event of search div.
</span>            <span class="ActionScriptReserved">public</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getchkdSrchLayersList</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span> 
                <span class="ActionScriptComment">//return a string as : layer_tablename#fid1,fid2;layer_tablename#fid1,fid2..
</span>                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tmpStr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>; 
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">srch_table_ids</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">checked</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span> 
                        <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">tmpStr</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;;&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;#&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">fids</span>; 
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">tmpStr</span>.<span class="ActionScriptDefault_Text">substring</span><span class="ActionScriptBracket/Brace">(</span>1,<span class="ActionScriptDefault_Text">tmpStr</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// shows the result of string search 
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">showStrSearchRes</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">JSON</span>.<span class="ActionScriptDefault_Text">decode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">())</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">key</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>;
                <span class="ActionScriptDefault_Text">strSrchResBx</span>.<span class="ActionScriptDefault_Text">removeAllChildren</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptComment">//srch_table_ids.splice(0, srch_table_ids.length);
</span>                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">key</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">key</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptComment">//create check boxes                                                          
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">chBx</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">CheckBox</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">CheckBox</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">strSrchResBx</span>.<span class="ActionScriptDefault_Text">addChild</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">chBx</span><span class="ActionScriptBracket/Brace">)</span>;                    
                    <span class="ActionScriptDefault_Text">chBx</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">key</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot; (&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;)&quot;</span>;
                    <span class="ActionScriptDefault_Text">chBx</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">key</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">chBx</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">Event</span>.<span class="ActionScriptDefault_Text">CHANGE</span>,<span class="ActionScriptDefault_Text">chBxlistener</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                    <span class="ActionScriptComment">// create obj and add to array for accessing from javascript                    
</span>                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fids</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>;
                    <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">fids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">fids</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;,&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                    <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">fids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">fids</span>.<span class="ActionScriptDefault_Text">substring</span><span class="ActionScriptBracket/Brace">(</span>1,<span class="ActionScriptDefault_Text">fids</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">checked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">srch_table_ids</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">container</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// for simple search - on click of check box it will call getData_Category function from javscript to load a particular layer
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">chBxlistener</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">temp</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">evt</span>.<span class="ActionScriptDefault_Text">target</span>.<span class="ActionScriptDefault_Text">id</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">fids</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>;
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 1; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span><span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">fids</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">fids</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;,&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;
                <span class="ActionScriptBracket/Brace">}</span>                
                <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;getData_Category&quot;</span>, <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">]</span>, <span class="ActionScriptDefault_Text">evt</span>.<span class="ActionScriptDefault_Text">target</span>.<span class="ActionScriptDefault_Text">selected</span>, <span class="ActionScriptDefault_Text">fids</span>.<span class="ActionScriptDefault_Text">substring</span><span class="ActionScriptBracket/Brace">(</span>1,<span class="ActionScriptDefault_Text">fids</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">))</span>;
                <span class="ActionScriptComment">// also change the corresponding checked value in the arr 
</span>                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">j</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">srch_table_ids</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">j</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">id</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptBracket/Brace">[</span>0<span class="ActionScriptBracket/Brace">])</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptDefault_Text">srch_table_ids</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">j</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">checked</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">evt</span>.<span class="ActionScriptDefault_Text">target</span>.<span class="ActionScriptDefault_Text">selected</span>;
                        <span class="ActionScriptReserved">break</span>;
                    <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// to show search results for advanced search - call a popwindow to show the result
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">showSearchRes</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">SearchOutput</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">PopUpManager</span>.<span class="ActionScriptDefault_Text">createPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">this</span>, <span class="ActionScriptDefault_Text">SearchOutput</span>, <span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptReserved">as</span> <span class="ActionScriptDefault_Text">SearchOutput</span>;                                                              
                <span class="ActionScriptDefault_Text">PopUpManager</span>.<span class="ActionScriptDefault_Text">centerPopUp</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">instance</span><span class="ActionScriptBracket/Brace">)</span>;                                                                          
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">JSON</span>.<span class="ActionScriptDefault_Text">decode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">())</span>;
                <span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">search_type</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">curr_search_type</span>;
                <span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">showOutputResult</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">resp</span>, <span class="ActionScriptDefault_Text">container</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">instance</span>.<span class="ActionScriptDefault_Text">addEventListener</span><span class="ActionScriptBracket/Brace">(C</span><span class="ActionScriptDefault_Text">loseEvent</span>.<span class="ActionScriptDefault_Text">CLOSE</span>,<span class="ActionScriptDefault_Text">CloseSearch</span><span class="ActionScriptBracket/Brace">)</span>;
                    
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">CloseSearch</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;mls_RemoveFromMap&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// to get attributes of selected layers from the server             
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">getAttrs</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">add_attr</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">action</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;getLayerAttr&quot;</span>;
                <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span><span class="ActionScriptOperator">=</span><span class="ActionScriptDefault_Text">getSelLayerList</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span>;                
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">layers_list</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;&quot;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>                        
                    <span class="ActionScriptDefault_Text">Alert</span>.<span class="ActionScriptDefault_Text">show</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;You must select atleast one layer&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptDefault_Text">add_attr</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptReserved">return</span>;
                <span class="ActionScriptBracket/Brace">}</span>                 
                <span class="ActionScriptDefault_Text">useHttpService</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">basePath</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">dataFile</span>, <span class="ActionScriptString">&quot;GET&quot;</span>, <span class="ActionScriptDefault_Text">obj</span>, <span class="ActionScriptDefault_Text">showAttrs</span>, <span class="ActionScriptDefault_Text">httpFaultHandler</span><span class="ActionScriptBracket/Brace">)</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// clears the attribute list box
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">clear_attr_lst</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptDefault_Text">layer_attr_arr</span>.<span class="ActionScriptDefault_Text">splice</span><span class="ActionScriptBracket/Brace">(</span>0, <span class="ActionScriptDefault_Text">layer_attr_arr</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptDefault_Text">layer_attr_lst</span>.<span class="ActionScriptDefault_Text">invalidateList</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptDefault_Text">clear_attr</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;    
                <span class="ActionScriptDefault_Text">add_attr</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;&quot;</span>;
                <span class="ActionScriptDefault_Text">query_val_inp</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptString">&quot;&quot;</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// string lookup in an array
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">findLabel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">for</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">ab_layers_arr</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ab_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptDefault_Text">val</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptReserved">break</span>;                        
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">return</span> <span class="ActionScriptDefault_Text">ab_layers_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">label</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// called as ajax response to show the attribute of layers
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">showAttrs</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">ResultEvent</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">JSON</span>.<span class="ActionScriptDefault_Text">decode</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">e</span>.<span class="ActionScriptDefault_Text">result</span>.<span class="ActionScriptDefault_Text">toString</span><span class="ActionScriptBracket/Brace">())</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">attr_lst</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Array</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Array</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">attrs</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span>;
                <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">key</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptReserved">in</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">attrs</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">resp</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">key</span><span class="ActionScriptBracket/Brace">]</span>;
                    <span class="ActionScriptDefault_Text">attr_lst</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">attrs</span>.<span class="ActionScriptDefault_Text">split</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;,&quot;</span><span class="ActionScriptBracket/Brace">)</span>;
                    <span class="ActionScriptReserved">for</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span> <span class="ActionScriptOperator">=</span> 0; <span class="ActionScriptDefault_Text">i</span> <span class="ActionScriptOperator">&lt;</span> <span class="ActionScriptDefault_Text">attr_lst</span>.<span class="ActionScriptDefault_Text">length</span>; <span class="ActionScriptDefault_Text">i</span><span class="ActionScriptOperator">++</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">temp</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">attr_lst</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">i</span><span class="ActionScriptBracket/Brace">]</span>;                        
                        <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Object</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">new</span> <span class="ActionScriptDefault_Text">Object</span><span class="ActionScriptBracket/Brace">()</span>;                        
                        <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">label</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">findLabel</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">key</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;:&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0,<span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>2<span class="ActionScriptBracket/Brace">)</span>;<span class="ActionScriptComment">//remove ; and 1/0 after it
</span>                        <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">data</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">substr</span><span class="ActionScriptBracket/Brace">(</span>0,<span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>2<span class="ActionScriptBracket/Brace">)</span>;<span class="ActionScriptComment">//remove ; and 1/0 after it
</span>                        <span class="ActionScriptDefault_Text">obj</span>.<span class="ActionScriptDefault_Text">dtype</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">charAt</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">temp</span>.<span class="ActionScriptDefault_Text">length</span><span class="ActionScriptOperator">-</span>1<span class="ActionScriptBracket/Brace">)</span>; <span class="ActionScriptComment">// get the last char                                                
</span>                        <span class="ActionScriptDefault_Text">layer_attr_arr</span>.<span class="ActionScriptDefault_Text">push</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">obj</span><span class="ActionScriptBracket/Brace">)</span>;        
                    <span class="ActionScriptBracket/Brace">}</span>
                  <span class="ActionScriptBracket/Brace">}</span>
                  <span class="ActionScriptDefault_Text">layer_attr_lst</span>.<span class="ActionScriptDefault_Text">dataProvider</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer_attr_arr</span>;
                  <span class="ActionScriptDefault_Text">layer_attr_lst</span>.<span class="ActionScriptDefault_Text">invalidateList</span><span class="ActionScriptBracket/Brace">()</span>;
                  <span class="ActionScriptDefault_Text">clear_attr</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// enable/disable different button (operations) depending upon the datatype of selected attribute
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">attr_clicked</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">rowIndx</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">tablename_attr</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer_attr_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">rowIndx</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">data</span>;
                <span class="ActionScriptvar">var</span> <span class="ActionScriptDefault_Text">dtype</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">layer_attr_arr</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">rowIndx</span><span class="ActionScriptBracket/Brace">]</span>.<span class="ActionScriptDefault_Text">dtype</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">dtype</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&apos;1&apos;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span> <span class="ActionScriptComment">//means its a string datatype
</span>                    <span class="ActionScriptDefault_Text">eqBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">neqBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">gtBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">ltBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">gteqBT</span>.<span class="ActionScriptDefault_Text">enabled</span>  <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;
                    <span class="ActionScriptDefault_Text">lteqBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">false</span>;                    
                    <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;upper(&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">tablename_attr</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;)&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span>;
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">eqBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">neqBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">gtBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">ltBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">gteqBT</span>.<span class="ActionScriptDefault_Text">enabled</span>  <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;
                    <span class="ActionScriptDefault_Text">lteqBT</span>.<span class="ActionScriptDefault_Text">enabled</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptReserved">true</span>;                    
                    <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">tablename_attr</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span>; 
                <span class="ActionScriptBracket/Brace">}</span>                                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// called on click event of all the buttons (operation) in attribute based search
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">oper</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">String</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">oper</span> <span class="ActionScriptOperator">==</span> <span class="ActionScriptString">&quot;OK&quot;</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">ltBT</span>.<span class="ActionScriptDefault_Text">enabled</span><span class="ActionScriptBracket/Brace">)</span> <span class="ActionScriptComment">//means the datatype of current attr is not a string
</span>                        <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">query_val_inp</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span>;                        
                    <span class="ActionScriptReserved">else</span>
                        <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot;upper(&apos;&quot;</span><span class="ActionScriptOperator">+</span><span class="ActionScriptDefault_Text">query_val_inp</span>.<span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">+</span><span class="ActionScriptString">&quot;&apos;)&quot;</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span>;
                        
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">query_box</span>.<span class="ActionScriptDefault_Text">text</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptDefault_Text">oper</span> <span class="ActionScriptOperator">+</span> <span class="ActionScriptString">&quot; &quot;</span>;
                <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// called on tab change event to set the dataproviders of list boxes
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">tabChange</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">/*if(tn.selectedIndex == 0 )
                    setDataProviders(0);
                else
                    setDataProviders(1);*/</span>
                <span class="ActionScriptComment">//Alert.show(&apos;here2&apos;);
</span>                <span class="ActionScriptComment">//Alert.show(String(tn.selectedIndex));    
</span>                <span class="ActionScriptDefault_Text">setDataProviders</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tn</span>.<span class="ActionScriptDefault_Text">selectedIndex</span><span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tn</span>.<span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">==</span> 1<span class="ActionScriptBracket/Brace">){</span>
                    <span class="ActionScriptDefault_Text">Clear</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;ActivateBBOX&quot;</span>,<span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tn</span>.<span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">){</span>
                    <span class="ActionScriptDefault_Text">gtabChange</span><span class="ActionScriptBracket/Brace">()</span>;
                <span class="ActionScriptBracket/Brace">}</span><span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;setFeatureClick&quot;</span>, 0,0<span class="ActionScriptBracket/Brace">)</span>;        
                <span class="ActionScriptBracket/Brace">}</span>
                                                        
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">gtabChange</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">gtn</span>.<span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">!=</span> 1<span class="ActionScriptBracket/Brace">){</span>
                    <span class="ActionScriptDefault_Text">Clear</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;ActivateBBOX&quot;</span>,<span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span>;
                    
                <span class="ActionScriptBracket/Brace">}</span>
                    
                <span class="ActionScriptComment">//Alert.show(String(gtn.selectedIndex + 1));    
</span>                <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;setFeatureClick&quot;</span>, 1,<span class="ActionScriptDefault_Text">gtn</span>.<span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">+</span> 1<span class="ActionScriptBracket/Brace">)</span>;    
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptComment">// called on selection of accordion to set the functionality of feature click on map
</span>            <span class="ActionScriptComment">// if simple search then click on feature will show the summary popup (default flow)
</span>            <span class="ActionScriptComment">// else click on feature will add the feature to the features list box
</span>            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">accordionChange</span><span class="ActionScriptBracket/Brace">()</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptComment">//Alert.show(String(accordion.selectedIndex));
</span>                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">accordion</span>.<span class="ActionScriptDefault_Text">selectedIndex</span> <span class="ActionScriptOperator">==</span> 0<span class="ActionScriptBracket/Brace">){</span>
                    <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;setFeatureClick&quot;</span>, 0,0<span class="ActionScriptBracket/Brace">)</span>;                    
                <span class="ActionScriptBracket/Brace">}</span> <span class="ActionScriptReserved">else</span> <span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptComment">//ExternalInterface.call(&quot;setFeatureClick&quot;, 1);
</span>                    <span class="ActionScriptComment">//Alert.show(&apos;here1&apos;);
</span>                    <span class="ActionScriptReserved">if</span> <span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">tn</span> <span class="ActionScriptOperator">!=</span> <span class="ActionScriptReserved">null</span><span class="ActionScriptBracket/Brace">)</span>
                        <span class="ActionScriptDefault_Text">tabChange</span><span class="ActionScriptBracket/Brace">()</span>;
                    <span class="ActionScriptReserved">else</span>
                        <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;setFeatureClick&quot;</span>, 1,1<span class="ActionScriptBracket/Brace">)</span>;
                <span class="ActionScriptBracket/Brace">}</span>                
            <span class="ActionScriptBracket/Brace">}</span>
            <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">ToggleSearchMsg</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">int</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span><span class="ActionScriptBracket/Brace">{</span>
                <span class="ActionScriptReserved">if</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">val</span><span class="ActionScriptOperator">==</span>1<span class="ActionScriptBracket/Brace">){</span>
                    <span class="ActionScriptDefault_Text">lblSearchMsg</span>.<span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;Click on one or more Features on the map&quot;</span>;
                <span class="ActionScriptBracket/Brace">}</span>    
                <span class="ActionScriptReserved">else</span><span class="ActionScriptBracket/Brace">{</span>
                    <span class="ActionScriptDefault_Text">lblSearchMsg</span>.<span class="ActionScriptDefault_Text">text</span><span class="ActionScriptOperator">=</span><span class="ActionScriptString">&quot;Draw a rectangle on map&quot;</span>;
                <span class="ActionScriptBracket/Brace">}</span>
                <span class="ActionScriptDefault_Text">ExternalInterface</span>.<span class="ActionScriptDefault_Text">call</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&quot;setFeatureClick&quot;</span>, 1,<span class="ActionScriptDefault_Text">val</span><span class="ActionScriptBracket/Brace">)</span>;        
            <span class="ActionScriptBracket/Brace">}</span>
            
        <span class="ActionScriptBracket/Brace">]]</span><span class="ActionScriptOperator">&gt;</span>
    <span class="MXMLSpecial_Tag">&lt;/mx:Script&gt;</span>
    
    <span class="MXMLComponent_Tag">&lt;ns1:FABridge</span><span class="MXMLDefault_Text"> bridgeName=&quot;</span><span class="MXMLString">FAB_MultiLayerSearch</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
    
    <span class="MXMLComponent_Tag">&lt;mx:Panel</span><span class="MXMLDefault_Text"> width = </span>&apos;<span class="MXMLString">100%</span><span class="MXMLDefault_Text">&apos; height = </span>&apos;<span class="MXMLString">100%</span><span class="MXMLDefault_Text">&apos; title=&quot;</span><span class="MXMLString">Multi Layer Search</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">container</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
        <span class="MXMLComponent_Tag">&lt;mx:Accordion</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">accordion</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; change=&quot;</span><span class="ActionScriptDefault_Text">accordionChange</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot; creationComplete=&quot;</span><span class="ActionScriptDefault_Text">accordionChange</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
            
            <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">sb_box</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">Simple Search</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                  <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">10%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingTop=&quot;</span><span class="MXMLString">20</span><span class="MXMLDefault_Text">&quot; paddingBottom=&quot;</span><span class="MXMLString">20</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                      <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Search String</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">20%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                      <span class="MXMLComponent_Tag">&lt;mx:TextInput</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">search_inp</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">60%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; enter=&quot;</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span> 
                      <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Search</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                          
                      <span class="MXMLComponent_Tag">&lt;/mx:Button&gt;</span>                     
                  <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                  <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">90%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; verticalScrollPolicy=&quot;</span><span class="MXMLString">on</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">strSrchResBx</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
              <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>        
        
            <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Advanced Search</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                <span class="MXMLComponent_Tag">&lt;mx:TabNavigator</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">tn</span><span class="MXMLDefault_Text">&quot; width = </span>&apos;<span class="MXMLString">100%</span><span class="MXMLDefault_Text">&apos; height = </span>&apos;<span class="MXMLString">100%</span><span class="MXMLDefault_Text">&apos; tabWidth=&quot;</span><span class="MXMLString">234</span><span class="MXMLDefault_Text">&quot; change=&quot;</span><span class="ActionScriptDefault_Text">tabChange</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                      
                      <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> label = </span>&apos;<span class="MXMLString">Geography Search</span><span class="MXMLDefault_Text">&apos; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">g_box</span><span class="MXMLDefault_Text">&quot; creationComplete=&quot;</span><span class="ActionScriptDefault_Text">gtabChange</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                          <span class="MXMLComponent_Tag">&lt;mx:TabNavigator</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">gtn</span><span class="MXMLDefault_Text">&quot; width = </span>&apos;<span class="MXMLString">100%</span><span class="MXMLDefault_Text">&apos; height = </span>&apos;<span class="MXMLString">100%</span><span class="MXMLDefault_Text">&apos; tabWidth=&quot;</span><span class="MXMLString">150</span><span class="MXMLDefault_Text">&quot; change=&quot;</span><span class="ActionScriptDefault_Text">gtabChange</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                              <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> label = </span>&apos;<span class="MXMLString">Feature Based</span><span class="MXMLDefault_Text">&apos; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">fb_box</span><span class="MXMLDefault_Text">&quot; creationComplete=&quot;</span><span class="ActionScriptDefault_Text">setDataProviders</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                  <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">lblSearchMsg</span><span class="MXMLDefault_Text">&quot; text=&quot;</span><span class="MXMLString">Click on one or more Features on the map</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">5%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                                  <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">45%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:List</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">75%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">featureids_lst</span><span class="MXMLDefault_Text">&quot; dataProvider=&quot;</span><span class="MXMLString">{</span><span class="ActionScriptDefault_Text">featureids_arr</span><span class="MXMLString">}</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;  width=&quot;</span><span class="MXMLString">25%</span><span class="MXMLDefault_Text">&quot; paddingTop=&quot;</span><span class="MXMLString">30</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Remove</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">rmBut</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">removeFeature</span><span class="ActionScriptBracket/Brace">(</span>0<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Remove All</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">rmAllBut</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">removeFeature</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>                                                                                                                                                        
                                <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">5%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">fb_hbx2</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Select layers to search into:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">70%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Delta Radius(metres):</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">20%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:TextInput</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">10%</span><span class="MXMLDefault_Text">&quot; text=&quot;</span><span class="MXMLString">1</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">delta_inp</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>                    
                                <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">45%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingBottom=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">fb_hbx3</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:List</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">50%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">fb_layers_lst</span><span class="MXMLDefault_Text">&quot; horizontalScrollPolicy=&quot;</span><span class="MXMLString">on</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:itemRenderer&gt;</span>
                                        <span class="MXMLSpecial_Tag">&lt;mx:Component&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:CheckBox</span><span class="MXMLDefault_Text"> selectedField=&quot;</span><span class="MXMLString">isSelected</span><span class="MXMLDefault_Text">&quot; change=&quot;</span><span class="ActionScriptDefault_Text">onChange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;<span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                        <span class="MXMLSpecial_Tag">&lt;mx:Script&gt;</span>
                                            <span class="ActionScriptOperator">&lt;!</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">CDATA</span><span class="ActionScriptBracket/Brace">[</span>                                        
                                                <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onChange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>                                            
                                                    <span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">selected</span>;
                                                <span class="ActionScriptBracket/Brace">}</span>
                                            <span class="ActionScriptBracket/Brace">]]</span><span class="ActionScriptOperator">&gt;</span>
                                        <span class="MXMLSpecial_Tag">&lt;/mx:Script&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;/mx:CheckBox&gt;</span>
                                        <span class="MXMLSpecial_Tag">&lt;/mx:Component&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;/mx:itemRenderer&gt;</span>                    
                                    <span class="MXMLComponent_Tag">&lt;/mx:List&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">50%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">75</span><span class="MXMLDefault_Text">&quot; paddingTop=&quot;</span><span class="MXMLString">60</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">75</span><span class="MXMLDefault_Text">&quot; paddingBottom=&quot;</span><span class="MXMLString">60</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Search</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">featureSearch</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>             
                            <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> label = </span>&apos;<span class="MXMLString">Bounding Box Search</span><span class="MXMLDefault_Text">&apos; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">bb_Search</span><span class="MXMLDefault_Text">&quot; creationComplete=&quot;</span><span class="ActionScriptDefault_Text">setDataProviders</span><span class="ActionScriptBracket/Brace">(</span>2<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:VBox&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:RadioButtonGroup</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">rdoBBOX</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:RadioButton</span><span class="MXMLDefault_Text"> click=&quot;</span><span class="ActionScriptDefault_Text">ActivateBBOX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">false</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">Navigate</span><span class="MXMLDefault_Text">&quot; groupName=&quot;</span><span class="MXMLString">rdoBBOX</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:RadioButton</span><span class="MXMLDefault_Text"> selected=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">ActivateBBOX</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptReserved">true</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">Draw a rectangle on map by mouse-click and mouse-drag</span><span class="MXMLDefault_Text">&quot; groupName=&quot;</span><span class="MXMLString">rdoBBOX</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Clear Drawing</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">Clear</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
                                                                        
                                    <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">15%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Bounding Box:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">20%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:TextArea</span><span class="MXMLDefault_Text">  editable=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">txtBBOX</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">75%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">5%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">bb_hbx2</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Select layers to search into:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">70%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">65%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingBottom=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">bb_hbx3</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:List</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;  id=&quot;</span><span class="MXMLString">bb_layers_lst</span><span class="MXMLDefault_Text">&quot; horizontalScrollPolicy=&quot;</span><span class="MXMLString">on</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                            <span class="MXMLComponent_Tag">&lt;mx:itemRenderer&gt;</span>
                                            <span class="MXMLSpecial_Tag">&lt;mx:Component&gt;</span>
                                            <span class="MXMLComponent_Tag">&lt;mx:CheckBox</span><span class="MXMLDefault_Text"> selectedField=&quot;</span><span class="MXMLString">isSelected</span><span class="MXMLDefault_Text">&quot; change=&quot;</span><span class="ActionScriptDefault_Text">onChange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;<span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                            <span class="MXMLSpecial_Tag">&lt;mx:Script&gt;</span>
                                                <span class="ActionScriptOperator">&lt;!</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">CDATA</span><span class="ActionScriptBracket/Brace">[</span>                                        
                                                    <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onChange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>                                            
                                                        <span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">selected</span>;
                                                    <span class="ActionScriptBracket/Brace">}</span>
                                                <span class="ActionScriptBracket/Brace">]]</span><span class="ActionScriptOperator">&gt;</span>
                                            <span class="MXMLSpecial_Tag">&lt;/mx:Script&gt;</span>
                                            <span class="MXMLComponent_Tag">&lt;/mx:CheckBox&gt;</span>
                                            <span class="MXMLSpecial_Tag">&lt;/mx:Component&gt;</span>
                                            <span class="MXMLComponent_Tag">&lt;/mx:itemRenderer&gt;</span>                    
                                        <span class="MXMLComponent_Tag">&lt;/mx:List&gt;</span>
                                        <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Search</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">BB_Search</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span>4<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">30%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">20%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>             
                            <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>        
                          <span class="MXMLComponent_Tag">&lt;/mx:TabNavigator&gt;</span>
                      <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>    
                     
                    <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">ab_box</span><span class="MXMLDefault_Text">&quot; label = </span>&apos;<span class="MXMLString">Attribute Based</span><span class="MXMLDefault_Text">&apos; width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; creationComplete=&quot;</span><span class="ActionScriptDefault_Text">setDataProviders</span><span class="ActionScriptBracket/Brace">(</span>1<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">5%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Select layers:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">60%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Select attributes:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">40%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">50%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:List</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">45%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">ab_layers_lst</span><span class="MXMLDefault_Text">&quot; horizontalScrollPolicy=&quot;</span><span class="MXMLString">on</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:itemRenderer&gt;</span>
                                <span class="MXMLSpecial_Tag">&lt;mx:Component&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:CheckBox</span><span class="MXMLDefault_Text"> selectedField=&quot;</span><span class="MXMLString">isSelected</span><span class="MXMLDefault_Text">&quot; change=&quot;</span><span class="ActionScriptDefault_Text">onChange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span><span class="ActionScriptBracket/Brace">)</span>;<span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                <span class="MXMLSpecial_Tag">&lt;mx:Script&gt;</span>
                                    <span class="ActionScriptOperator">&lt;!</span><span class="ActionScriptBracket/Brace">[</span><span class="ActionScriptDefault_Text">CDATA</span><span class="ActionScriptBracket/Brace">[</span>                                        
                                        <span class="ActionScriptReserved">private</span> <span class="ActionScriptfunction">function</span> <span class="ActionScriptDefault_Text">onChange</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">evt</span><span class="ActionScriptOperator">:</span><span class="ActionScriptDefault_Text">Event</span><span class="ActionScriptBracket/Brace">)</span><span class="ActionScriptOperator">:</span><span class="ActionScriptReserved">void</span> <span class="ActionScriptBracket/Brace">{</span>                                            
                                            <span class="ActionScriptDefault_Text">data</span>.<span class="ActionScriptDefault_Text">isSelected</span> <span class="ActionScriptOperator">=</span> <span class="ActionScriptDefault_Text">selected</span>;
                                        <span class="ActionScriptBracket/Brace">}</span>
                                    <span class="ActionScriptBracket/Brace">]]</span><span class="ActionScriptOperator">&gt;</span>
                                <span class="MXMLSpecial_Tag">&lt;/mx:Script&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;/mx:CheckBox&gt;</span>
                                <span class="MXMLSpecial_Tag">&lt;/mx:Component&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;/mx:itemRenderer&gt;</span>                           
                            <span class="MXMLComponent_Tag">&lt;/mx:List&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:VBox</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">5%</span><span class="MXMLDefault_Text">&quot; paddingTop=&quot;</span><span class="MXMLString">40</span><span class="MXMLDefault_Text">&quot; paddingBottom=&quot;</span><span class="MXMLString">40</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Add</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">add_attr</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">getAttrs</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Clear</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">clear_attr</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">clear_attr_lst</span><span class="ActionScriptBracket/Brace">()</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:List</span><span class="MXMLDefault_Text"> height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">50%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">layer_attr_lst</span><span class="MXMLDefault_Text">&quot; allowMultipleSelection=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot; horizontalScrollPolicy=&quot;</span><span class="MXMLString">on</span><span class="MXMLDefault_Text">&quot; itemDoubleClick=&quot;</span><span class="ActionScriptDefault_Text">attr_clicked</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptDefault_Text">event</span>.<span class="ActionScriptDefault_Text">rowIndex</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; doubleClickEnabled=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>                            
                        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">10%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">70%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">eqBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">=</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;=&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">neqBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">&amp;lt;&amp;gt;</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;&amp;lt;&amp;gt;&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">gtBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">&amp;gt;</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;&amp;gt;&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">ltBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">&amp;lt;</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;&amp;lt;&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">gteqBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">&amp;gt;=</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;&amp;gt;=&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">lteqBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">&amp;lt;=</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;&amp;lt;=&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot; enabled=&quot;</span><span class="MXMLString">false</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:Label</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLString">Value:</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">10%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:TextInput</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">20%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">query_val_inp</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">10%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">andBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">AND</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;AND&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> id=&quot;</span><span class="MXMLString">orBT</span><span class="MXMLDefault_Text">&quot; label=&quot;</span><span class="MXMLString">OR</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;OR&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:HDividedBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; </span><span class="MXMLComponent_Tag">/&gt;</span>                            
                            <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">OK</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">setOper</span><span class="ActionScriptBracket/Brace">(</span><span class="ActionScriptString">&apos;OK&apos;</span><span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">25%</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingRight=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot; paddingBottom=&quot;</span><span class="MXMLString">5</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:TextArea</span><span class="MXMLDefault_Text"> text=&quot;</span><span class="MXMLDefault_Text">&quot; id=&quot;</span><span class="MXMLString">query_box</span><span class="MXMLDefault_Text">&quot; width=&quot;</span><span class="MXMLString">70%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; wordWrap=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot; editable=&quot;</span><span class="MXMLString">true</span><span class="MXMLDefault_Text">&quot; fontSize=&quot;</span><span class="MXMLString">12</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;mx:HBox</span><span class="MXMLDefault_Text"> width=&quot;</span><span class="MXMLString">30%</span><span class="MXMLDefault_Text">&quot; height=&quot;</span><span class="MXMLString">100%</span><span class="MXMLDefault_Text">&quot; paddingTop=&quot;</span><span class="MXMLString">25</span><span class="MXMLDefault_Text">&quot; paddingLeft=&quot;</span><span class="MXMLString">30</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">&gt;</span>
                                <span class="MXMLComponent_Tag">&lt;mx:Button</span><span class="MXMLDefault_Text"> label=&quot;</span><span class="MXMLString">Search</span><span class="MXMLDefault_Text">&quot; click=&quot;</span><span class="ActionScriptDefault_Text">search</span><span class="ActionScriptBracket/Brace">(</span>2<span class="ActionScriptBracket/Brace">)</span><span class="MXMLDefault_Text">&quot;</span><span class="MXMLComponent_Tag">/&gt;</span>
                            <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                        <span class="MXMLComponent_Tag">&lt;/mx:HBox&gt;</span>
                    <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
                    
                  <span class="MXMLComponent_Tag">&lt;/mx:TabNavigator&gt;</span>
                <span class="MXMLComment">&lt;!--</span><span class="MXMLComment">
                  &lt;mx:VBox width=&quot;100%&quot; height=&quot;20%&quot; paddingLeft=&quot;5&quot; paddingRight=&quot;5&quot; enabled=&quot;false&quot;&gt;
                      &lt;mx:Label text=&quot;Other Options&quot;/&gt;
                      &lt;mx:HBox width=&quot;100%&quot;&gt;
                        &lt;mx:CheckBox label=&quot;Point Layer&quot; height=&quot;17&quot; selected=&quot;true&quot;/&gt;
                        &lt;mx:CheckBox label=&quot;Polygon Layer&quot; height=&quot;17&quot; selected=&quot;true&quot;/&gt;
                        &lt;mx:CheckBox label=&quot;Line Layer&quot; height=&quot;17&quot; selected=&quot;true&quot;/&gt;
                      &lt;/mx:HBox&gt;
                      &lt;mx:CheckBox label=&quot;Show O/P Synchronously (creates a link table in DB if unselected)&quot; selected=&quot;true&quot; /&gt;
                  &lt;/mx:VBox&gt;
                  </span><span class="MXMLComment">--&gt;</span>
              <span class="MXMLComponent_Tag">&lt;/mx:VBox&gt;</span>
            
        <span class="MXMLComponent_Tag">&lt;/mx:Accordion&gt;</span>
    <span class="MXMLComponent_Tag">&lt;/mx:Panel&gt;</span>    

<span class="MXMLComponent_Tag">&lt;/mx:Application&gt;</span></pre></body>
</html>
